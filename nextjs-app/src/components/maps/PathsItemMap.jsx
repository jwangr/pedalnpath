"use client";

import { MapContainer, Polyline, TileLayer, useMap } from "react-leaflet";
import "leaflet/dist/leaflet.css";
import "leaflet-defaulticon-compatibility/dist/leaflet-defaulticon-compatibility.webpack.css";
import "leaflet-defaulticon-compatibility";
import { Box } from "@mui/material";
import { useEffect, useRef } from "react";

const exampleCoordinates = [
  [-45.85025, 170.47109],
  [-45.85015, 170.47113],
  [-45.85003, 170.4712],
  [-45.84989, 170.47125],
  [-45.84981, 170.4713],
  [-45.84975, 170.47134],
  [-45.84967, 170.47141],
  [-45.84958, 170.4715],
  [-45.8495, 170.47159],
  [-45.84946, 170.47163],
  [-45.84943, 170.47164],
  [-45.84938, 170.47165],
  [-45.84926, 170.47162],
  [-45.8492, 170.47162],
  [-45.84916, 170.47163],
  [-45.84912, 170.47165],
  [-45.84909, 170.47168],
  [-45.84907, 170.47173],
  [-45.84902, 170.47186],
  [-45.84899, 170.4719],
  [-45.84896, 170.47194],
  [-45.84893, 170.47196],
  [-45.84879, 170.47202],
  [-45.84875, 170.47205],
  [-45.84872, 170.47209],
  [-45.84869, 170.47216],
  [-45.84863, 170.47235],
  [-45.84859, 170.47244],
  [-45.84854, 170.47251],
  [-45.84851, 170.47255],
  [-45.84845, 170.47257],
  [-45.8484, 170.47258],
  [-45.84836, 170.47257],
  [-45.84831, 170.47253],
  [-45.84827, 170.47251],
  [-45.84824, 170.47251],
  [-45.84822, 170.47252],
  [-45.84818, 170.47255],
  [-45.84814, 170.47262],
  [-45.84811, 170.47267],
  [-45.84808, 170.4727],
  [-45.84805, 170.47272],
  [-45.84802, 170.47273],
  [-45.84798, 170.47273],
  [-45.84794, 170.47272],
  [-45.84783, 170.47266],
  [-45.84772, 170.4726],
  [-45.84768, 170.47256],
  [-45.84763, 170.47251],
  [-45.84759, 170.47244],
  [-45.84754, 170.47237],
  [-45.84749, 170.47232],
  [-45.84744, 170.4723],
  [-45.84737, 170.47231],
  [-45.8473, 170.47235],
  [-45.84725, 170.47241],
  [-45.84703, 170.47278],
  [-45.84699, 170.47287],
  [-45.84694, 170.473],
  [-45.8469, 170.47316],
  [-45.84685, 170.47344],
  [-45.84682, 170.47358],
  [-45.84678, 170.4737],
  [-45.84672, 170.47383],
  [-45.84667, 170.47393],
  [-45.84661, 170.47403],
  [-45.84654, 170.47411],
  [-45.84647, 170.47418],
  [-45.84638, 170.47424],
  [-45.84567, 170.47454],
  [-45.84557, 170.47457],
  [-45.84548, 170.47458],
  [-45.84526, 170.47455],
  [-45.84461, 170.47447],
  [-45.84452, 170.47447],
  [-45.84431, 170.47452],
  [-45.84424, 170.47451],
  [-45.84419, 170.47449],
  [-45.84415, 170.47445],
  [-45.84412, 170.4744],
  [-45.84407, 170.47429],
  [-45.84403, 170.47424],
  [-45.844, 170.4742],
  [-45.84396, 170.47417],
  [-45.84392, 170.47416],
  [-45.84372, 170.47415],
  [-45.84365, 170.47414],
  [-45.84359, 170.47412],
  [-45.84349, 170.47408],
  [-45.8434, 170.47406],
  [-45.84334, 170.47405],
  [-45.84321, 170.47405],
  [-45.84296, 170.47408],
  [-45.84291, 170.47408],
  [-45.84288, 170.47407],
  [-45.84284, 170.47405],
  [-45.84281, 170.474],
  [-45.8428, 170.47395],
  [-45.84278, 170.47387],
  [-45.84274, 170.47375],
  [-45.8427, 170.47366],
  [-45.84247, 170.47325],
  [-45.84227, 170.47289],
  [-45.84214, 170.47266],
  [-45.84227, 170.47289],
  [-45.84247, 170.47325],
  [-45.8427, 170.47366],
  [-45.84274, 170.47375],
  [-45.84278, 170.47387],
  [-45.8428, 170.47395],
  [-45.84281, 170.474],
  [-45.84284, 170.47405],
  [-45.84288, 170.47407],
  [-45.84291, 170.47408],
  [-45.84296, 170.47408],
  [-45.84321, 170.47405],
  [-45.84334, 170.47405],
  [-45.8434, 170.47406],
  [-45.84349, 170.47408],
  [-45.84359, 170.47412],
  [-45.84365, 170.47414],
  [-45.84372, 170.47415],
  [-45.84392, 170.47416],
  [-45.84396, 170.47417],
  [-45.844, 170.4742],
  [-45.84403, 170.47424],
  [-45.84407, 170.47429],
  [-45.84412, 170.4744],
  [-45.84415, 170.47445],
  [-45.84419, 170.47449],
  [-45.84424, 170.47451],
  [-45.84431, 170.47452],
  [-45.84452, 170.47447],
  [-45.84461, 170.47447],
  [-45.84526, 170.47455],
  [-45.84548, 170.47458],
  [-45.84557, 170.47457],
  [-45.84567, 170.47454],
  [-45.84638, 170.47424],
  [-45.84647, 170.47418],
  [-45.84654, 170.47411],
  [-45.84661, 170.47403],
  [-45.84667, 170.47393],
  [-45.84672, 170.47383],
  [-45.84678, 170.4737],
  [-45.84682, 170.47358],
  [-45.84685, 170.47344],
  [-45.8469, 170.47316],
  [-45.84694, 170.473],
  [-45.84699, 170.47287],
  [-45.84703, 170.47278],
  [-45.84725, 170.47241],
  [-45.8473, 170.47235],
  [-45.84737, 170.47231],
  [-45.84744, 170.4723],
  [-45.84749, 170.47232],
  [-45.84754, 170.47237],
  [-45.84759, 170.47244],
  [-45.84763, 170.47251],
  [-45.84768, 170.47256],
  [-45.84772, 170.4726],
  [-45.84783, 170.47266],
  [-45.84794, 170.47272],
  [-45.84798, 170.47273],
  [-45.84802, 170.47273],
  [-45.84805, 170.47272],
  [-45.84808, 170.4727],
  [-45.84811, 170.47267],
  [-45.84814, 170.47262],
  [-45.84818, 170.47255],
  [-45.84822, 170.47252],
  [-45.84824, 170.47251],
  [-45.84827, 170.47251],
  [-45.84831, 170.47253],
  [-45.84836, 170.47257],
  [-45.8484, 170.47258],
  [-45.84845, 170.47257],
  [-45.84851, 170.47255],
  [-45.84854, 170.47251],
  [-45.84859, 170.47244],
  [-45.84863, 170.47235],
  [-45.84869, 170.47216],
  [-45.84872, 170.47209],
  [-45.84875, 170.47205],
  [-45.84879, 170.47202],
  [-45.84893, 170.47196],
  [-45.84896, 170.47194],
  [-45.84899, 170.4719],
  [-45.84902, 170.47186],
  [-45.84907, 170.47173],
  [-45.84909, 170.47168],
  [-45.84912, 170.47165],
  [-45.84916, 170.47163],
  [-45.8492, 170.47162],
  [-45.84926, 170.47162],
  [-45.84938, 170.47165],
  [-45.84943, 170.47164],
  [-45.84946, 170.47163],
  [-45.8495, 170.47159],
  [-45.84958, 170.4715],
  [-45.84967, 170.47141],
  [-45.84975, 170.47134],
  [-45.84981, 170.4713],
  [-45.84989, 170.47125],
  [-45.85003, 170.4712],
  [-45.85015, 170.47113],
  [-45.8504, 170.47102],
  [-45.85045, 170.471],
  [-45.85049, 170.47099],
  [-45.85053, 170.47099],
  [-45.85056, 170.47101],
  [-45.85059, 170.47103],
  [-45.85061, 170.47108],
  [-45.85062, 170.47114],
  [-45.85062, 170.47124],
  [-45.85061, 170.47138],
  [-45.85062, 170.47149],
  [-45.85064, 170.47157],
  [-45.85067, 170.47166],
  [-45.85072, 170.47174],
  [-45.85079, 170.47181],
  [-45.85086, 170.47187],
  [-45.85093, 170.47189],
  [-45.85099, 170.47191],
  [-45.85106, 170.47192],
  [-45.85113, 170.47193],
  [-45.85121, 170.47191],
  [-45.85129, 170.47187],
  [-45.85137, 170.47181],
  [-45.85142, 170.47177],
  [-45.85153, 170.47163],
  [-45.85157, 170.4716],
  [-45.8516, 170.47158],
  [-45.85164, 170.47157],
  [-45.85167, 170.47158],
  [-45.8517, 170.47159],
  [-45.85174, 170.47163],
  [-45.85183, 170.47175],
  [-45.85205, 170.47207],
  [-45.85209, 170.47211],
  [-45.85212, 170.47214],
  [-45.85215, 170.47216],
  [-45.85219, 170.47217],
  [-45.85224, 170.47217],
  [-45.85229, 170.47216],
  [-45.85247, 170.47209],
  [-45.85255, 170.47208],
  [-45.85259, 170.47208],
  [-45.85263, 170.47208],
  [-45.85266, 170.4721],
  [-45.8527, 170.47213],
  [-45.85275, 170.47219],
  [-45.85314, 170.47293],
  [-45.85331, 170.47325],
  [-45.85325, 170.47331],
  [-45.85325, 170.47362],
  [-45.85301, 170.47386],
  [-45.85304, 170.47392],
  [-45.85307, 170.47409],
  [-45.85308, 170.47429],
  [-45.8531, 170.47444],
  [-45.85313, 170.47456],
  [-45.8532, 170.47464],
  [-45.85336, 170.47472],
  [-45.85344, 170.47478],
  [-45.85363, 170.4751],
  [-45.85345, 170.4753],
  [-45.85338, 170.47537],
  [-45.85332, 170.47547],
  [-45.85324, 170.4756],
  [-45.85307, 170.47591],
  [-45.85279, 170.47644],
  [-45.85276, 170.47648],
  [-45.85184, 170.47811],
  [-45.85122, 170.47917],
  [-45.85065, 170.48021],
  [-45.85059, 170.48028],
  [-45.85052, 170.48035],
  [-45.8504, 170.48049],
  [-45.85033, 170.48059],
  [-45.85026, 170.48071],
  [-45.85018, 170.48089],
  [-45.85013, 170.48104],
  [-45.85004, 170.48125],
  [-45.84998, 170.48135],
  [-45.84977, 170.48171],
  [-45.8494, 170.48234],
  [-45.84904, 170.48298],
  [-45.84884, 170.48331],
  [-45.84852, 170.48384],
  [-45.84818, 170.48443],
  [-45.84814, 170.4845],
  [-45.84716, 170.4862],
  [-45.84712, 170.48628],
  [-45.84618, 170.4879],
  [-45.84519, 170.48966],
  [-45.84494, 170.49011],
  [-45.84474, 170.49046],
  [-45.84471, 170.49049],
  [-45.84425, 170.49129],
  [-45.84417, 170.49143],
  [-45.84411, 170.49154],
  [-45.84409, 170.49161],
  [-45.84408, 170.49165],
  [-45.84408, 170.49169],
  [-45.84407, 170.49176],
  [-45.84408, 170.49182],
  [-45.84409, 170.49189],
  [-45.84432, 170.493],
  [-45.84434, 170.49321],
  [-45.84435, 170.49343],
  [-45.84433, 170.49369],
  [-45.84431, 170.49385],
  [-45.84429, 170.49396],
  [-45.84425, 170.49408],
  [-45.84421, 170.49417],
  [-45.84418, 170.49422],
  [-45.84411, 170.49429],
  [-45.84403, 170.49434],
  [-45.84395, 170.49435],
  [-45.8439, 170.49434],
  [-45.84386, 170.49434],
  [-45.84379, 170.49431],
  [-45.84371, 170.49426],
  [-45.84361, 170.49417],
  [-45.84351, 170.49406],
  [-45.84321, 170.4937],
  [-45.84309, 170.49356],
  [-45.84306, 170.49355],
  [-45.843, 170.49351],
  [-45.84288, 170.49346],
  [-45.8428, 170.49344],
  [-45.8425, 170.49339],
  [-45.84225, 170.49332],
  [-45.84216, 170.49331],
  [-45.84199, 170.49335],
  [-45.84179, 170.4934],
  [-45.8416, 170.49352],
  [-45.8414, 170.49364],
  [-45.84124, 170.49372],
  [-45.84114, 170.49374],
  [-45.84107, 170.49374],
  [-45.84099, 170.49373],
  [-45.84093, 170.4937],
  [-45.84089, 170.49367],
  [-45.84085, 170.49364],
  [-45.84082, 170.49359],
  [-45.84079, 170.49352],
  [-45.84069, 170.49324],
  [-45.84066, 170.49318],
  [-45.84063, 170.49314],
  [-45.84058, 170.4931],
  [-45.84056, 170.4931],
  [-45.84059, 170.49281],
  [-45.84055, 170.49261],
  [-45.84053, 170.49258],
  [-45.8405, 170.4925],
  [-45.84036, 170.49228],
  [-45.84019, 170.49202],
  [-45.84008, 170.49174],
  [-45.83998, 170.49109],
  [-45.83982, 170.49067],
  [-45.83962, 170.4903],
  [-45.83937, 170.49008],
  [-45.83908, 170.49003],
  [-45.83894, 170.49007],
  [-45.83844, 170.49021],
  [-45.83827, 170.49031],
  [-45.83802, 170.49037],
  [-45.83737, 170.49053],
  [-45.83704, 170.4906],
  [-45.83674, 170.49064],
  [-45.83601, 170.49074],
  [-45.83586, 170.49072],
  [-45.83585, 170.49061],
  [-45.83579, 170.49049],
  [-45.83573, 170.49038],
  [-45.83565, 170.4903],
  [-45.83555, 170.49025],
  [-45.83553, 170.49013],
  [-45.83551, 170.49008],
  [-45.83549, 170.49003],
  [-45.83548, 170.48998],
  [-45.83545, 170.48993],
  [-45.83544, 170.48989],
  [-45.83543, 170.48984],
  [-45.8354, 170.48979],
  [-45.83537, 170.48975],
  [-45.83534, 170.4897],
  [-45.83532, 170.48967],
  [-45.8353, 170.48965],
  [-45.83529, 170.48961],
  [-45.83529, 170.48957],
  [-45.8353, 170.48953],
  [-45.83529, 170.48949],
  [-45.83526, 170.48945],
  [-45.83523, 170.48939],
  [-45.83519, 170.48932],
  [-45.83517, 170.48923],
  [-45.83514, 170.48912],
  [-45.83509, 170.48904],
  [-45.83504, 170.48893],
  [-45.835, 170.48881],
  [-45.83491, 170.48869],
  [-45.83483, 170.48861],
  [-45.83478, 170.48854],
  [-45.83472, 170.4885],
  [-45.83465, 170.48836],
  [-45.83458, 170.48822],
  [-45.83449, 170.48813],
  [-45.83446, 170.48807],
  [-45.83443, 170.48798],
  [-45.83437, 170.48792],
  [-45.83428, 170.48788],
  [-45.83417, 170.48785],
  [-45.83408, 170.48782],
  [-45.83402, 170.48784],
  [-45.83399, 170.48782],
  [-45.83394, 170.48782],
  [-45.83388, 170.48781],
  [-45.83386, 170.48779],
  [-45.83381, 170.48777],
  [-45.83375, 170.48771],
  [-45.8337, 170.48763],
  [-45.83366, 170.48753],
  [-45.8336, 170.48746],
  [-45.83354, 170.48738],
  [-45.83351, 170.48735],
  [-45.83348, 170.48733],
  [-45.83345, 170.48732],
  [-45.8334, 170.48733],
  [-45.83338, 170.4873],
  [-45.83334, 170.48723],
  [-45.83329, 170.4872],
  [-45.83324, 170.48718],
  [-45.83319, 170.48716],
  [-45.83312, 170.48714],
  [-45.83303, 170.4871],
  [-45.83297, 170.48709],
  [-45.83289, 170.48706],
  [-45.83282, 170.48708],
  [-45.83265, 170.48708],
  [-45.83256, 170.48708],
  [-45.83247, 170.48709],
  [-45.8324, 170.48712],
  [-45.83233, 170.48719],
  [-45.83228, 170.48721],
  [-45.83221, 170.48727],
  [-45.83213, 170.48729],
  [-45.83207, 170.4873],
  [-45.83201, 170.48728],
  [-45.83197, 170.48725],
  [-45.83193, 170.4872],
  [-45.83191, 170.48716],
  [-45.8319, 170.48708],
  [-45.83189, 170.48697],
  [-45.8319, 170.48689],
  [-45.83188, 170.48684],
  [-45.83185, 170.4868],
  [-45.83182, 170.48677],
  [-45.83177, 170.48676],
  [-45.83172, 170.48677],
  [-45.83168, 170.4868],
  [-45.83165, 170.48681],
  [-45.83161, 170.48681],
  [-45.83159, 170.48678],
  [-45.83157, 170.48671],
  [-45.83151, 170.4866],
  [-45.83144, 170.48649],
  [-45.83139, 170.48636],
  [-45.83131, 170.4863],
  [-45.83126, 170.48625],
  [-45.83122, 170.4862],
  [-45.83115, 170.48615],
  [-45.83105, 170.48609],
  [-45.83096, 170.48605],
  [-45.83089, 170.48601],
  [-45.83081, 170.48603],
  [-45.83073, 170.48609],
  [-45.83059, 170.48615],
  [-45.83052, 170.48621],
  [-45.83045, 170.48625],
  [-45.83036, 170.48629],
  [-45.83018, 170.48639],
  [-45.83008, 170.48602],
  [-45.83, 170.4859],
  [-45.82978, 170.48553],
  [-45.82971, 170.48538],
  [-45.82958, 170.48498],
  [-45.82948, 170.48464],
  [-45.82942, 170.48428],
  [-45.82934, 170.48397],
  [-45.82927, 170.48383],
  [-45.82925, 170.48341],
  [-45.82927, 170.48298],
  [-45.82921, 170.48281],
  [-45.82896, 170.48212],
  [-45.82844, 170.48087],
  [-45.82805, 170.48011],
  [-45.82761, 170.47928],
  [-45.82773, 170.47909],
  [-45.82776, 170.47895],
  [-45.82777, 170.47876],
  [-45.82783, 170.47848],
  [-45.82789, 170.47822],
  [-45.82808, 170.47817],
  [-45.8282, 170.47819],
  [-45.82848, 170.47828],
  [-45.82865, 170.47827],
  [-45.82897, 170.47827],
  [-45.82933, 170.47823],
  [-45.82964, 170.4782],
  [-45.82972, 170.47822],
  [-45.82964, 170.4782],
  [-45.82933, 170.47823],
  [-45.82897, 170.47827],
  [-45.82865, 170.47827],
  [-45.82848, 170.47828],
  [-45.8282, 170.47819],
  [-45.82808, 170.47817],
  [-45.82789, 170.47822],
  [-45.82783, 170.47848],
  [-45.82777, 170.47876],
  [-45.82776, 170.47895],
  [-45.82773, 170.47909],
  [-45.82761, 170.47928],
  [-45.82733, 170.47876],
  [-45.82729, 170.47836],
  [-45.82713, 170.47806],
  [-45.82693, 170.47769],
  [-45.82667, 170.47768],
  [-45.82629, 170.47762],
  [-45.82608, 170.47758],
  [-45.82602, 170.47745],
  [-45.826, 170.47697],
  [-45.82599, 170.4766],
  [-45.82566, 170.47648],
  [-45.8255, 170.47642],
  [-45.82523, 170.47619],
  [-45.82503, 170.4763],
  [-45.82487, 170.4765],
  [-45.82468, 170.47666],
  [-45.82425, 170.47688],
  [-45.8234, 170.47737],
  [-45.82246, 170.47786],
  [-45.82147, 170.47832],
  [-45.82076, 170.47867],
  [-45.81949, 170.47929],
  [-45.81828, 170.48004],
  [-45.81768, 170.48063],
  [-45.81705, 170.48127],
  [-45.81697, 170.48134],
  [-45.81707, 170.48159],
  [-45.81715, 170.48167],
  [-45.81718, 170.48175],
  [-45.81738, 170.48216],
  [-45.81743, 170.48235],
  [-45.81754, 170.48254],
  [-45.81758, 170.48256],
  [-45.81771, 170.48287],
  [-45.81805, 170.48355],
  [-45.81822, 170.48394],
  [-45.81833, 170.48405],
  [-45.81849, 170.48444],
  [-45.81915, 170.48531],
  [-45.81955, 170.48579],
  [-45.81915, 170.48531],
  [-45.81849, 170.48444],
  [-45.81833, 170.48405],
  [-45.81822, 170.48394],
  [-45.81805, 170.48355],
  [-45.81771, 170.48287],
  [-45.81758, 170.48256],
  [-45.81754, 170.48254],
  [-45.81743, 170.48235],
  [-45.81738, 170.48216],
  [-45.81718, 170.48175],
  [-45.81715, 170.48167],
  [-45.81707, 170.48159],
  [-45.81697, 170.48134],
  [-45.81671, 170.48161],
  [-45.81613, 170.48193],
  [-45.81566, 170.48222],
  [-45.81523, 170.48253],
  [-45.81467, 170.48308],
  [-45.81409, 170.48364],
  [-45.81371, 170.48411],
  [-45.81343, 170.48442],
  [-45.81305, 170.48484],
  [-45.81266, 170.48519],
  [-45.81198, 170.48517],
  [-45.81151, 170.48526],
  [-45.81101, 170.48514],
  [-45.81069, 170.48511],
  [-45.81049, 170.48515],
  [-45.80996, 170.485],
  [-45.8099, 170.48491],
  [-45.80985, 170.48469],
  [-45.80971, 170.48446],
  [-45.80962, 170.48423],
  [-45.80958, 170.48386],
  [-45.80916, 170.48329],
  [-45.80878, 170.48271],
  [-45.80862, 170.48247],
  [-45.80814, 170.48189],
  [-45.80791, 170.48177],
  [-45.80762, 170.48147],
  [-45.80741, 170.48151],
  [-45.80718, 170.48153],
  [-45.80684, 170.4819],
  [-45.80647, 170.4821],
  [-45.80598, 170.48245],
  [-45.80563, 170.4828],
  [-45.80545, 170.48311],
  [-45.80559, 170.48353],
  [-45.8056, 170.48396],
  [-45.80552, 170.48428],
  [-45.80524, 170.4848],
  [-45.80517, 170.48503],
  [-45.80521, 170.48538],
  [-45.80536, 170.48595],
  [-45.8056, 170.48707],
  [-45.80581, 170.48822],
  [-45.80595, 170.48903],
  [-45.80597, 170.48926],
  [-45.80581, 170.48972],
  [-45.80577, 170.48996],
  [-45.80599, 170.49069],
  [-45.80621, 170.4909],
  [-45.8065, 170.49109],
  [-45.80698, 170.49209],
  [-45.80744, 170.49293],
  [-45.80698, 170.49209],
  [-45.8065, 170.49109],
  [-45.80621, 170.4909],
  [-45.80599, 170.49069],
  [-45.80577, 170.48996],
  [-45.80581, 170.48972],
  [-45.80597, 170.48926],
  [-45.80595, 170.48903],
  [-45.80581, 170.48822],
  [-45.80561, 170.48813],
  [-45.80536, 170.48805],
  [-45.80516, 170.48794],
  [-45.80499, 170.48783],
  [-45.80475, 170.48769],
  [-45.80453, 170.48758],
  [-45.80432, 170.48748],
  [-45.80407, 170.48735],
  [-45.80377, 170.48721],
  [-45.80355, 170.48708],
  [-45.80316, 170.48695],
  [-45.80285, 170.48677],
  [-45.8026, 170.48664],
  [-45.80212, 170.48639],
  [-45.80216, 170.48647],
  [-45.80211, 170.48666],
  [-45.80203, 170.48699],
  [-45.80196, 170.48747],
  [-45.80203, 170.48779],
  [-45.8018, 170.48859],
  [-45.8016, 170.48926],
  [-45.80161, 170.48974],
  [-45.80151, 170.4901],
  [-45.80144, 170.49058],
  [-45.80157, 170.49107],
  [-45.80167, 170.49126],
  [-45.8017, 170.49141],
  [-45.80168, 170.49206],
  [-45.80161, 170.49267],
  [-45.80156, 170.49279],
  [-45.80152, 170.49318],
  [-45.80139, 170.49422],
  [-45.80138, 170.49464],
  [-45.80134, 170.49496],
  [-45.80131, 170.49523],
  [-45.80118, 170.49568],
  [-45.80109, 170.49598],
  [-45.80111, 170.49624],
  [-45.80098, 170.49667],
  [-45.80107, 170.49692],
  [-45.80115, 170.4974],
  [-45.8012, 170.49787],
  [-45.80127, 170.49814],
  [-45.80132, 170.49838],
  [-45.80137, 170.49863],
  [-45.80139, 170.49876],
  [-45.80146, 170.4989],
  [-45.80152, 170.49925],
  [-45.80154, 170.49937],
  [-45.80148, 170.4997],
  [-45.80131, 170.49994],
  [-45.8012, 170.50011],
  [-45.80111, 170.50029],
];

// Props: bikepath coordinates
export default function MapBoxContainer({ coordinates = exampleCoordinates }) {

  const CentredMap = () => {
    const map = useMap();
    // Center the map around the coordinates
    map.fitBounds(coordinates);

    return null;
  };

  return (
    <Box
      sx={{
        width: { xs: "100%", sm: 200 },
        height: { xs: 200, sm: "100%" },
        flexShrink: 0,
      }}
    >
      {coordinates?.length > 0 && (
        <MapContainer
          center={[-45.0302, 168.6615]}
          zoom={12}
          style={{ height: "100%", width: "100%" }}
          zoomControl={false} // remove zoom buttons
          attributionControl={false} // remove footer
          dragging={false} // disable dragging
          scrollWheelZoom={false} // disable scroll zoom
          doubleClickZoom={false} // disable double-click zoom
          touchZoom={false} // disable touch zoom
          keyboard={false} // disable keyboard navigation
        >
          {/* 21. Set the tile layer for the map. */}
          <TileLayer
            attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
          />

          {/* Draw the route */}
          <Polyline positions={coordinates} color="purple" />

          <CentredMap />
        </MapContainer>
      )}
    </Box>
  );
}
